<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio'clock</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
</head>
<body>
    <h1>RADIO'CLOCK</h1>
    <div class="info">
        <p onclick="location.href= './feedback.html'">현재 이 프로그램은 BETA 상태입니다.<br>피드백을 작성해 프로그램에 기여하세요!(글자 클릭)</p>
        <p onclick="location.href= './first.html'">처음 오셨나요? 사용법을 알아보고 편하게 이용하세요.(글자 클릭)</p>
    </div><br>
    <input class="first-time1" style="width: 30px;"/> <span>시</span> <span>~</span> <input class="first-time2" style="width: 30px;"/> <span>시</span>
    <select class="first-radio" onchange="frf(this)">
        <option value="none">-라디오 채널 선택-</option>
        <option value="KBS2FM">KBS Happy FM</option>
        <option value="ClassicFM">KBS Classic FM</option>
        <option value="MBCFM4U">MBC FM 4U</option>
    </select> <br><br>
    <input class="second-time1" style="width: 30px;"/> <span>시</span> <span>~</span> <input class="second-time2" style="width: 30px;"/> <span>시</span>
    <select class="second-radio" onchange="srf(this)">
        <option value="none">-라디오 채널 선택-</option>
        <option value="KBS2FM">KBS Happy FM</option>
        <option value="ClassicFM">KBS Classic FM</option>
        <option value="MBCFM4U">MBC FM 4U</option>
    </select><br><br>
    <input class="third-time1" style="width: 30px;"/> <span>시</span> <span>~</span> <input class="third-time2" style="width: 30px;"/> <span>시</span>
    <select class="third-radio" onchange="trf(this)">
        <option value="none">-라디오 채널 선택-</option>
        <option value="KBS2FM">KBS Happy FM</option>
        <option value="ClassicFM">KBS Classic FM</option>
        <option value="MBCFM4U">MBC FM 4U</option>
    </select><br><br>
    <button class="BTN" style="width: 76%; ">완료</button><br>
    <div class="cover">
        <div class="box"></div>
    </div>
    <style>
        *{
            text-align: center;
            font-family: 'Gowun Dodum', sans-serif;
        }
        h1{
            font-family: 'Gowun Dodum', sans-serif;
            margin-bottom: 2px;
        }
        h3{
            font-family: 'Gowun Dodum', sans-serif;
        }
        p{
            color: black;
            font-size: 10px;
        }
        .info{ 
            border: 0.1px solid black;
        }
    </style>
    <script>
        box = document.querySelector(".box")
        t1 = document.querySelector(".first-time1")
        t2 = document.querySelector(".first-time2")
        fr = document.querySelector(".first-radio")
        t3 = document.querySelector(".second-time1")
        t4 = document.querySelector(".second-time2")
        sr = document.querySelector(".second-radio")
        t5 = document.querySelector(".third-time1")
        t6 = document.querySelector(".third-time2")
        tr = document.querySelector(".third-radio")
        btn = document.querySelector(".BTN")
        let RadioFirst
        let RadioSecond
        let RadioThird
        let t1value
        let t2value
        let t3value
        let t4value
        let t5value
        let t6value

        function frf (e) {
            RadioFirst = e.value;
            console.log(RadioFirst)
        }
        function srf (e) {
            RadioSecond = e.value;
        }
        function trf (e) {
            RadioThird = e.value;
        }

        t1.addEventListener("change", ()=>{
            t1value = Number(t1.value)
        })
        t2.addEventListener("change", ()=>{
            t2value = Number(t2.value)
        })
        t3.addEventListener("change", ()=>{
            t3value = Number(t3.value)
        })
        t4.addEventListener("change", ()=>{
            t4value = Number(t4.value)
        })
        t5.addEventListener("change", ()=>{
            t5value = Number(t5.value)
        })
        t6.addEventListener("change", ()=>{
            t6value = Number(t6.value)
        })

        console.log(t2value)

        let tf1
        let tf2
        let tf3
        let REAL
        let radioName
        let radioLink
        let times

        btn.addEventListener("click", ()=>{
            let hehe = document.querySelector("iframe")
            let haha = document.querySelector("h3")
            let nextRN
            let nextRL
            let nnextRN
            let nnextRL
            let fiTime
            let ffTime
            if(hehe == null && haha == null){
                
            }
            else {
                let parant = document.querySelector(".cover")
                parant.removeChild(hehe)
                parant.removeChild(haha)
            }
            let today = new Date()
            let time = today.getHours()
            console.log(time)
            function numberInBetween1(startingNumber, endingNumber, givenNumber){
                if(givenNumber >= startingNumber && givenNumber < endingNumber)
                    tf1 = true
                else
                    tf1 = false
            }
            function numberInBetween2(startingNumber, endingNumber, givenNumber){
                if(givenNumber >= startingNumber && givenNumber <= endingNumber)
                    tf2 = true
                else
                    tf2 = false
            }
            function numberInBetween3(startingNumber, endingNumber, givenNumber){
                if(givenNumber >= startingNumber && givenNumber <= endingNumber)
                    tf3 = true
                else
                    tf3 = false
            }
            
            numberInBetween1(t1value,t2value,time)
            numberInBetween2(t3value,t4value,time)
            numberInBetween3(t5value,t6value,time)

            console.log(tf1, tf2, tf3)

            if(tf1==true){
                REAL = RadioFirst
                fiTime = t2value
                ffTime = t4value
            }
            else if(tf2==true){
                REAL = RadioSecond
                fiTime = t4value
                ffTime = t6value
            }
            else if(tf3==true){
                REAL = RadioThird
                fiTime = t6value
            }
            else{
                REAL = "none"
            }

            console.log(REAL)

            switch(REAL) {
                case "KBS2FM" :
                    radioName = "KBS Happy FM"
                    break
                case "ClassicFM" :
                    radioName = "KBS Classic FM"
                    break
                case "MBCFM4U" :
                    radioName = "MBC FM4U"
                    break
                default :
                    radioName = "None"
            }

            switch(REAL) {
                case "KBS2FM" :
                    radioLink = "https://onair.kbs.co.kr/?sname=onair&stype=live&ch_code=22&ch_type=radioList"
                    break
                case "ClassicFM" :
                    radioLink = "https://onair.kbs.co.kr/index.html?sname=onair&stype=live&ch_code=24&ch_type=radioList"
                    break
                case "MBCFM4U" :
                    radioLink = "https://miniwebapp.imbc.com/index?channel=mfm"
                    break
                default :
                    radioLink = "./none.html"
            }

            Cafu = "<h3>"+radioName+"</h3>" + '<iframe src="' +radioLink+ '"></iframe>'
            console.log(Cafu)
            box.insertAdjacentHTML("afterend", Cafu)
            iframe = document.querySelector("iframe")
            iframe.style.width = "90%"
            iframe.style.height = "100%"
            iframe.style.border = "none"

            if(REAL == RadioFirst){
                times = 2
                switch(RadioSecond) {
                    case "KBS2FM" :
                        nextRL = "https://onair.kbs.co.kr/?sname=onair&stype=live&ch_code=22&ch_type=radioList"
                        break
                    case "ClassicFM" :
                        nextRL = "https://onair.kbs.co.kr/index.html?sname=onair&stype=live&ch_code=24&ch_type=radioList"
                        break
                    case "MBCFM4U" :
                        nextRL = "https://miniwebapp.imbc.com/index?channel=mfm"
                        break
                    default :
                        nextRL = "./none.html"
                }
                switch(RadioSecond) {
                    case "KBS2FM" :
                        nextRN = "KBS Happy FM"
                        break
                    case "ClassicFM" :
                        nextRN = "KBS Classic FM"
                        break
                    case "MBCFM4U" :
                        nextRN = "MBC FM4U"
                        break
                    default :
                        nextRN = "None"
                }
                switch(RadioThird) {
                    case "KBS2FM" :
                        nnextRL = "https://onair.kbs.co.kr/?sname=onair&stype=live&ch_code=22&ch_type=radioList"
                        break
                    case "ClassicFM" :
                        nnextRL = "https://onair.kbs.co.kr/index.html?sname=onair&stype=live&ch_code=24&ch_type=radioList"
                        break
                    case "MBCFM4U" :
                        nnextRL = "https://miniwebapp.imbc.com/index?channel=mfm"
                        break
                    default :
                        nnextRL = "./none.html"
                }
                switch(RadioThird) {
                    case "KBS2FM" :
                        nnextRN = "KBS Happy FM"
                        break
                    case "ClassicFM" :
                        nnextRN = "KBS Classic FM"
                        break
                    case "MBCFM4U" :
                        nnextRN = "MBC FM4U"
                        break
                    default :
                        nnextRN = "None"
                }
            }
            else if(REAL == RadioSecond){
                times = 1
                nextRN = RadioThird
                switch(RadioThird) {
                    case "KBS2FM" :
                        nextRL = "https://onair.kbs.co.kr/?sname=onair&stype=live&ch_code=22&ch_type=radioList"
                        break
                    case "ClassicFM" :
                        nextRL = "https://onair.kbs.co.kr/index.html?sname=onair&stype=live&ch_code=24&ch_type=radioList"
                        break
                    case "MBCFM4U" :
                        nextRL = "https://miniwebapp.imbc.com/index?channel=mfm"
                        break
                    default :
                        nextRL = "./none.html"
                }
                switch(RadioThird) {
                    case "KBS2FM" :
                        nextRN = "KBS Happy FM"
                        break
                    case "ClassicFM" :
                        nextRN = "KBS Classic FM"
                        break
                    case "MBCFM4U" :
                        nextRN = "MBC FM4U"
                        break
                    default :
                        nextRN = "None"
                }
            }
            else if(REAL == RadioThird){
                times = 0
            }
            else{

            }

            var i
            var timea = today.getMinutes()
            var h = fiTime*60 - time*60 + timea
            var hh = ffTime*60 - time*60 + timea
            console.log(h)
            console.log(hh)
            var t = h*60000
            var tt = hh*60000
            var test = 10000
            console.log(times)
            
            if(times > 0){
                setTimeout(()=>{
                    let hehe = document.querySelector("iframe")
                    let haha = document.querySelector("h3")
                    let parant = document.querySelector(".cover")
                    parant.removeChild(hehe)
                    parant.removeChild(haha)
                    si = "<h3>"+nextRN+"</h3>" + '<iframe src="' +nextRL+ '"></iframe>'
                    console.log(si)
                    box.insertAdjacentHTML("afterend", si)
                    iframe = document.querySelector("iframe")
                    iframe.style.width = "90%"
                    iframe.style.height = "100%"
                    iframe.style.border = "none"
                }, t)
            }

            if(times > 1){
                setTimeout(()=>{
                    let hehe = document.querySelector("iframe")
                    let haha = document.querySelector("h3")
                    let parant = document.querySelector(".cover")
                    parant.removeChild(hehe)
                    parant.removeChild(haha)
                    si = "<h3>"+nnextRN+"</h3>" + '<iframe src="' +nnextRL+ '"></iframe>'
                    console.log(si)
                    box.insertAdjacentHTML("afterend", si)
                    iframe = document.querySelector("iframe")
                    iframe.style.width = "90%"
                    iframe.style.height = "100%"
                    iframe.style.border = "none"
                }, tt)
            }

        })
    </script>
</body>
</html>